# Code Verification Rule

## Before Submitting Any Code Change

**ALWAYS verify code changes before telling the user they're done:**

1. **Run ruff check** on modified files:
   ```bash
   uv run ruff check <modified_file.py>
   ```

2. **Verify imports work** for any modified module:
   ```bash
   uv run python -c "import <module_path>"
   ```

3. **Run pytest** if tests exist:
   ```bash
   uv run pytest tests/ -v --tb=short
   ```

## Common Mistakes to Avoid

- **Indentation errors** when moving code blocks - always check surrounding context
- **Missing imports** when adding new function calls
- **Broken string replacements** that only partially update a block
- **Defining functions inside loops** that should be module-level

## When Making Multi-Line Edits

1. Read enough context (at least 10 lines before and after)
2. Include complete code blocks in replacements (full if/for/while blocks)
3. Verify indentation matches the surrounding code
4. After edit, run `ruff check` to catch syntax/style issues
